[{"diskText":"require_relative \"../lib/domainredirect.rb\"\n\nclass Arewesmallyet < Padrino::Application\n  register Padrino::Rendering\n  register Padrino::Pipeline\n  register Padrino::Helpers\n  register Padrino::Cache\n\n  use Rack::DomainRedirect, [\"arewesmallyet.dev\", \"localhost\"]\n\n  disable :sessions\n  disable :flash\n  disable :asset_stamp\n  disable :caching\n  set :haml, :format => :html5\n\n  get :index do\n    render :index\n  end\n\n  get :data, provides: :json do\n    # Record.order(:day).map do |r|\n    #   {r.day.to_s => JSON.parse!(r.data)}\n    # end.reduce({}, :merge!).to_json\n\n    Sequel::Model.db.fetch(\"select json_object_agg(day,data) as jsobj from records;\").first[:jsobj]\n  end\n\n  get \"/*\", :priority => :low do\n    redirect \"/\"\n  end\n\n  configure_assets do |config|\n    config.pipeline = Padrino::Pipeline::Sprockets\n    config.prefix = '/public'\n    config.enable_compression = true if (RACK_ENV == 'production')\n  end\n\n  configure :production do\n    enable :asset_stamp\n    enable :caching\n    expires 3600 * 12\n    # You can customize caching store engines:\n    #\n    #   set :cache, Padrino::Cache::Store::Memcache.new(::Memcached.new('127.0.0.1:11211', :exception_retry_limit => 1))\n    #   set :cache, Padrino::Cache::Store::Memcache.new(::Dalli::Client.new('127.0.0.1:11211', :exception_retry_limit => 1))\n    #   set :cache, Padrino::Cache::Store::Redis.new(::Redis.new(:host => '127.0.0.1', :port => 6379, :db => 0))\n    #   set :cache, Padrino::Cache::Store::Memory.new(50)\n    #   set :cache, Padrino::Cache::Store::File.new(Padrino.root('tmp', app_name.to_s, 'cache')) # default choice\n    set :cache, Padrino::Cache::Store::Memcache.new(::Dalli::Client.new(:exception_retry_limit => 1))\n  end\n\n  ##\n  # You can manage errors like:\n  #\n  #   error 404 do\n  #     render 'errors/404'\n  #   end\n  #\n  #   error 505 do\n  #     render 'errors/505'\n  #   end\n  #\nend\n","text":"require_relative \"../lib/domainredirect.rb\"\n\nclass Arewesmallyet < Padrino::Application\n  register Padrino::Rendering\n  register Padrino::Pipeline\n  register Padrino::Helpers\n  register Padrino::Cache\n\n  use Rack::DomainRedirect, [\"arewesmallyet.dev\", \"localhost\"]\n\n  disable :sessions\n  disable :flash\n  disable :asset_stamp\n  disable :caching\n  set :haml, :format => :html5\n\n  get :index do\n    render :index\n  end\n\n  get :data, provides: :json do\n    # Record.order(:day).map do |r|\n    #   {r.day.to_s => JSON.parse!(r.data)}\n    # end.reduce({}, :merge!).to_json\n\n    Sequel::Model.db.fetch(\"select json_object_agg(day,data) as jsobj from records;\").first[:jsobj]\n  end\n\n  get \"/*\", :priority => :low do\n    redirect \"/\"\n  end\n\n  configure_assets do |config|\n    config.pipeline = Padrino::Pipeline::Sprockets\n    config.prefix = '/public'\n    config.enable_compression = true if (RACK_ENV == 'production')\n  end\n\n  configure :production do\n    enable :asset_stamp\n    enable :caching\n    expires 3600 * 12\n    # You can customize caching store engines:\n    #\n    #   set :cache, Padrino::Cache::Store::Memcache.new(::Memcached.new('127.0.0.1:11211', :exception_retry_limit => 1))\n    #   set :cache, Padrino::Cache::Store::Memcache.new(::Dalli::Client.new('127.0.0.1:11211', :exception_retry_limit => 1))\n    #   set :cache, Padrino::Cache::Store::Redis.new(::Redis.new(:host => '127.0.0.1', :port => 6379, :db => 0))\n    #   set :cache, Padrino::Cache::Store::Memory.new(50)\n    #   set :cache, Padrino::Cache::Store::File.new(Padrino.root('tmp', app_name.to_s, 'cache')) # default choice\n    set :cache, Padrino::Cache::Store::Memcache.new(::Dalli::Client.new(:exception_retry_limit => 1))\n  end\n\n  ##\n  # You can manage errors like:\n  #\n  #   error 404 do\n  #     render 'errors/404'\n  #   end\n  #\n  #   error 505 do\n  #     render 'errors/505'\n  #   end\n  #\nend\n","active":false,"path":"/Users/camdennarzt/Developer/Ruby/arewesmallyet/app/app.rb","scroll":2}]