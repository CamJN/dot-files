# Virtual Hosts
#
# Required modules: mod_log_config

# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at
# <URL:http://httpd.apache.org/docs/2.4/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost 127.0.0.1:80>
    Redirect permanent / https://localhost/
    ServerName localhost
    ServerAlias walle.local
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerAdmin webmaster@localhost
    DocumentRoot "/Library/WebServer/Documents"
    ServerName localhost
    ServerAlias walle.local
    ErrorLog "/private/var/log/apache2/error_log"
    CustomLog "/private/var/log/apache2/access_log" common
    <Directory "/Library/WebServer/Documents">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerAdmin webmaster@rust.test
    DocumentRoot "/Users/camdennarzt/.rustup/toolchains/stable-x86_64-apple-darwin/share/doc/rust/html/"
    ServerName rust.test
    ServerAlias www.rust.test
    ErrorLog "/private/var/log/apache2/rust.dev-error_log"
    CustomLog "/private/var/log/apache2/rust.dev-access_log" common
    <Directory "/Users/camdennarzt/.rustup/toolchains/stable-x86_64-apple-darwin/share/doc/rust/html/">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerName grafana.test
    <IfModule proxy_module>
        ProxyPreserveHost On
        ProxyPass /public !
        ProxyPass / http://127.0.0.1:3333/
        ProxyPassReverse / http://127.0.0.1:3333/
    </IfModule>

    DocumentRoot "/Users/camdennarzt/Sites/grafana"
    <Directory "/Users/camdennarzt/Sites/grafana">;
        Require all granted
    </Directory>
    ErrorLog "/private/var/log/apache2/grafana.dev-error_log"
    CustomLog "/private/var/log/apache2/grafana.dev-access_log" common

    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    <IfModule php7_module>
        php_admin_value session.save_path "/Users/camdennarzt/Sites/silversshadows/tmp"
    </IfModule>
    ServerAdmin webmaster@silversshadows.test
    DocumentRoot "/Users/camdennarzt/Sites/silversshadows"
    ServerName silversshadows.test
    ServerAlias www.silversshadows.test
    ErrorLog "/private/var/log/apache2/silversshadows.dev-error_log"
    CustomLog "/private/var/log/apache2/silversshadows.dev-access_log" common
    <Directory "/Users/camdennarzt/Sites/silversshadows">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerAdmin webmaster@splash.silversshadows.test
    DocumentRoot "/Users/camdennarzt/Sites/splash.silversshadows"
    ServerName splash.silversshadows.test
    ServerAlias www.splash.silversshadows.test
    ErrorLog "/private/var/log/apache2/splash.silversshadows.dev-error_log"
    CustomLog "/private/var/log/apache2/splash.silversshadows.dev-access_log" common
    Include /private/etc/apache2/extra/httpd-ssl-common.conf
    <Directory "/Users/camdennarzt/Sites/splash.silversshadows">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerAdmin webmaster@compass.test
    DocumentRoot "/Users/camdennarzt/Sites/compass"
    ServerName compass.test
    ServerAlias www.compass.test
    ErrorLog "/private/var/log/apache2/compass.dev-error_log"
    CustomLog "/private/var/log/apache2/compass.dev-access_log" common
    <Directory "/Users/camdennarzt/Sites/compass">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerName mailcatcher.test
    ErrorLog "/private/var/log/apache2/mailcatcher.dev-error_log"
    CustomLog "/private/var/log/apache2/mailcatcher.dev-access_log" common
    <IfModule proxy_module>
        ProxyPass /api/v2/websocket ws://127.0.0.1:8025/api/v2/websocket
        ProxyPassReverse /api/v2/websocket ws://127.0.0.1:8025/api/v2/websocket
        ProxyPass / http://127.0.0.1:8025/
        ProxyPassReverse / http://127.0.0.1:8025/
    </IfModule>
    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerAdmin webmaster@phusionpassenger.test
    ServerName phusionpassenger.test
    ServerAlias www.phusionpassenger.test
    ErrorLog "/private/var/log/apache2/phusionpassenger.dev-error_log"
    CustomLog "/private/var/log/apache2/phusionpassenger.dev-access_log" common
    Redirect permanent / /tutorials/what_is_passenger/
    Redirect permanent /tutorials/ /tutorials/what_is_passenger/
    <IfModule proxy_module>
        ProxyPreserveHost On
        SSLProxyEngine On
        ProxyPass / http://127.0.0.1:4567/
        ProxyPassReverse / http://127.0.0.1:4567/
        ProxyPass /livereload wss://127.0.0.1:35730/
        ProxyPassReverse /livereload wss://127.0.0.1:35730/
    </IfModule>
    Header edit Content-Type "text/plain" "text/html"
    Include /private/etc/apache2/extra/httpd-ssl-common.conf
</VirtualHost>

# <VirtualHost 127.0.0.1:443>
#     ServerAdmin webmaster@shield.lock.dev
#     ServerName shield.lock.dev
#     ServerAlias *.shield.lock.dev
#     LogLevel warn proxy:trace5
#     ErrorLog "/private/var/log/apache2/shield.lock.dev-error_log"
#     CustomLog "/private/var/log/apache2/shield.lock.dev-access_log" common
#     <IfModule mod_passenger.c>
#         PassengerAppEnv development
#         PassengerAppRoot "/Users/camdennarzt/Sites/shield.lock"
#         PassengerHighPerformance on
#     </IfModule>
#     <Directory "/Users/camdennarzt/Sites/shield.lock/public">
#         Options +FollowSymLinks -MultiViews -Indexes
#         AllowOverride All
#         Require all granted
#     </Directory>

#     <IfModule proxy_module>
#         ProxyPreserveHost On
#         SSLProxyEngine On

#         ProxyPass /packs/ http://127.0.0.1:3035/packs/
#         ProxyPassReverse /packs/ http://127.0.0.1:3035/packs/

#         ProxyPass /sockjs-node/info http://127.0.0.1:3035/sockjs-node/info
#         ProxyPassReverse /sockjs-node/info http://127.0.0.1:3035/sockjs-node/info
#         ProxyPass /sockjs-node/iframe.html http://127.0.0.1:3035/sockjs-node/iframe.html
#         ProxyPassReverse /sockjs-node/iframe.html http://127.0.0.1:3035/sockjs-node/iframe.html
#         ProxyPass /__webpack_dev_server__/sockjs.bundle.js http://127.0.0.1:3035/__webpack_dev_server__/sockjs.bundle.js
#         ProxyPassReverse /__webpack_dev_server__/sockjs.bundle.js http://127.0.0.1:3035/__webpack_dev_server__/sockjs.bundle.js

#         ProxyPassMatch "/sockjs-node/(.*/(xhr(_streaming)?|jsonp|eventsource|htmlfile).*)$" "http://127.0.0.1:3035/sockjs-node/$1"

#         ProxyPass /sockjs-node/ ws://127.0.0.1:3035/sockjs-node/
#         ProxyPassReverse /sockjs-node/ ws://127.0.0.1:3035/sockjs-node/

#         RequestHeader setIfEmpty "Origin" "expr=%{REQUEST_SCHEME}://%{HTTP_HOST}"
#         Header set "Access-Control-Allow-Origin" "https://phusion.shield.lock.dev"
#     </IfModule>
#     Include /private/etc/apache2/extra/httpd-ssl-common.conf
# </VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerName shinies.test
    ErrorLog "/private/var/log/apache2/shinies.dev-error_log"
    CustomLog "/private/var/log/apache2/shinies.dev-access_log" common
    Include /private/etc/apache2/extra/httpd-ssl-common.conf

    DocumentRoot "/Users/camdennarzt/Sites/shinies"
    <Directory "/Users/camdennarzt/Sites/shinies">
        Options +FollowSymLinks -MultiViews -Indexes
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost 127.0.0.1:443>
    ServerName heartwork.test
    ErrorLog "/private/var/log/apache2/heartwork.dev-error_log"
    CustomLog "/private/var/log/apache2/heartwork.dev-access_log" common
    Include /private/etc/apache2/extra/httpd-ssl-common.conf

    DocumentRoot "/Users/camdennarzt/Sites/heartwork/backend/public"
    <Directory "/Users/camdennarzt/Sites/heartwork/backend/public">
        Options +FollowSymLinks -MultiViews -Indexes
        AllowOverride All
        Require all granted
    </Directory>

    <IfModule passenger_module>
        PassengerAppEnv development
    </IfModule>

    <LocationMatch "^/(?!(users/|paths|rails/|cable))">
        RewriteEngine On
        # If an existing asset or directory is requested go to it as it is
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
        RewriteRule ^ - [L]
        # If the requested resource doesn't exist, use index.html
        RewriteRule ^ /index.html
    </LocationMatch>
</VirtualHost>
